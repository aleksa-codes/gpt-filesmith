---
const title = 'GPT FileSmith';

if (Astro.request.method === 'POST') {
  try {
    const data = await Astro.request.formData();
    let path = data.get('path') as string;
    if (!path.startsWith('/')) {
      path = `/${path}`;
    }
    return Astro.redirect(path);
  } catch (error) {
    console.error(error);
  }
}
---

<html lang='en'>
  <head>
    <meta charset='UTF-8' />
    <meta name='viewport' content='width=device-width, initial-scale=1.0' />
    <title>{title}</title>
    <style>
      body {
        background-image: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      }
    </style>
  </head>

  <body class='flex flex-col items-center justify-center min-h-screen'>
    <div class='w-1/3 p-8 bg-white rounded-lg shadow-lg text-center'>
      <h1 class='text-purple-700 text-4xl font-semibold mb-4'>{title}</h1>
      <p class='text-gray-700 text-lg mb-8'>
        Type a path with an extension like <code>/example.html</code> and GPT will create content for you based on the file
        type. Supported types are HTML, CSS, JavaScript, and JSON.
      </p>
      <form method='POST' class='flex flex-col items-center'>
        <label for='path' class='text-gray-700 mb-2'>Path:</label>
        <input
          type='text'
          name='path'
          id='path'
          class='border border-gray-300 py-2 px-4 rounded-lg mb-4 w-full focus:outline-none focus:border-purple-700'
          placeholder='/pokemon/charizard.(html/css/js/json etc.)'
          required
        />
        <button
          type='submit'
          class='bg-purple-700 hover:bg-purple-600 text-white font-semibold py-2 px-4 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-600 focus:ring-opacity-50 transition duration-300'
        >
          Generate
        </button>
      </form>
    </div>
  </body>
</html>
